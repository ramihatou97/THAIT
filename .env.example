# NeuroscribeAI Configuration Template
# Copy this file to .env and fill in your values

# =============================================================================
# Environment Settings
# =============================================================================
ENVIRONMENT=development  # development, production, test
DEBUG=true
LOG_LEVEL=INFO  # DEBUG, INFO, WARNING, ERROR, CRITICAL
SECRET_KEY=change-me-in-production-use-python-secrets-token-urlsafe

# =============================================================================
# API Server
# =============================================================================
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=4
API_RELOAD=true  # Set false in production

# =============================================================================
# Database Configuration
# =============================================================================
# PostgreSQL
DATABASE_URL=postgresql://neuroscribe:neuroscribe_pass@localhost:5432/neuroscribe
DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=10
DATABASE_POOL_TIMEOUT=30
DATABASE_ECHO=false  # Set true for SQL logging

# Redis
REDIS_URL=redis://localhost:6379/0
REDIS_MAX_CONNECTIONS=50

# Neo4j
NEO4J_URI=bolt://localhost:7687
NEO4J_USER=neo4j
NEO4J_PASSWORD=neo4j_password
NEO4J_DATABASE=neo4j

# =============================================================================
# LLM Provider Configuration
# =============================================================================
# OpenAI
OPENAI_API_KEY=sk-your-openai-key-here
OPENAI_MODEL=gpt-4-turbo-preview
OPENAI_MAX_TOKENS=4000
OPENAI_TEMPERATURE=0.3

# Anthropic
ANTHROPIC_API_KEY=sk-ant-your-anthropic-key-here
ANTHROPIC_MODEL=claude-3-5-sonnet-20241022
ANTHROPIC_MAX_TOKENS=4000
ANTHROPIC_TEMPERATURE=0.3

# Default Provider
LLM_PROVIDER=anthropic  # openai or anthropic
LLM_FALLBACK_PROVIDER=openai
LLM_MAX_RETRIES=3
LLM_TIMEOUT=120

# =============================================================================
# Celery Task Queue
# =============================================================================
CELERY_BROKER_URL=redis://localhost:6379/1
CELERY_RESULT_BACKEND=redis://localhost:6379/2
CELERY_TASK_ALWAYS_EAGER=false  # Set true for synchronous testing
WORKER_CONCURRENCY=4
WORKER_PREFETCH_MULTIPLIER=2
TASK_TIME_LIMIT=600  # 10 minutes
TASK_SOFT_TIME_LIMIT=540  # 9 minutes

# =============================================================================
# Feature Flags
# =============================================================================
ENABLE_NLI_VERIFICATION=true
ENABLE_CLINICAL_RULES=true
ENABLE_VALIDATION=true
ENABLE_GRAPH_CONSTRUCTION=true
ENABLE_ML_LEARNING=false  # Experimental

# =============================================================================
# Extraction Configuration
# =============================================================================
EXTRACTION_TIMEOUT=300  # 5 minutes
EXTRACTION_BATCH_SIZE=10
EXTRACTION_MIN_CONFIDENCE=0.7
EXTRACTION_USE_NER=true
EXTRACTION_USE_LLM=true

# =============================================================================
# Temporal Reasoning
# =============================================================================
TEMPORAL_CONFLICT_THRESHOLD=0.8
TEMPORAL_MAX_POD=100  # Maximum plausible post-op day

# =============================================================================
# Validation Configuration
# =============================================================================
VALIDATION_SCORE_THRESHOLD=85  # 0-100
VALIDATION_COMPLETENESS_THRESHOLD=90
VALIDATION_ACCURACY_THRESHOLD=95
VALIDATION_ENABLE_NLI=true

# =============================================================================
# Clinical Rules
# =============================================================================
RULES_ENABLE_ALL=true
RULES_SEIZURE_PROPHYLAXIS=true
RULES_DVT_PROPHYLAXIS=true
RULES_STEROID_TAPER=true
RULES_SODIUM_MONITORING=true
RULES_HEMORRHAGE_RISK=true
RULES_DISCHARGE_READINESS=true

# =============================================================================
# Performance Configuration
# =============================================================================
VECTOR_SEARCH_TOP_K=10
VECTOR_SIMILARITY_THRESHOLD=0.7
CHUNK_SIZE=500
CHUNK_OVERLAP=50
CACHE_TTL=3600  # 1 hour
CACHE_MAX_SIZE=1000

# =============================================================================
# Security
# =============================================================================
API_KEY_HEADER=X-API-Key
CORS_ORIGINS=http://localhost:3000,http://localhost:5173
CORS_ALLOW_CREDENTIALS=true
RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_MINUTE=60

# =============================================================================
# Monitoring
# =============================================================================
SENTRY_DSN=  # Optional: Add Sentry DSN for error tracking
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090

# =============================================================================
# Backup Configuration
# =============================================================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 2 * * *"  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=  # Optional: S3 bucket for offsite backups

# =============================================================================
# Development/Testing
# =============================================================================
PYTEST_MARKERS=unit,integration,performance
TEST_DATABASE_URL=postgresql://neuroscribe:neuroscribe_pass@localhost:5433/neuroscribe_test
